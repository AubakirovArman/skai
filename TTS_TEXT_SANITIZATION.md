# üéôÔ∏è –û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è TTS (Text-to-Speech)

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

TTS –æ–∑–≤—É—á–∏–≤–∞–ª Markdown —Ä–∞–∑–º–µ—Ç–∫—É –∫–∞–∫ –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç:

```
–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç:
**–ü–£–ù–ö–¢ –ü–û–í–ï–°–¢–ö–ò –î–ù–Ø:** –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

TTS –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç:
"–∑–≤—ë–∑–¥–æ—á–∫–∞ –∑–≤—ë–∑–¥–æ—á–∫–∞ –ü–£–ù–ö–¢ –ü–û–í–ï–°–¢–ö–ò –î–ù–Ø –¥–≤–æ–µ—Ç–æ—á–∏–µ –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
```

**–î—Ä—É–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- `### –ó–∞–≥–æ–ª–æ–≤–æ–∫` ‚Üí "—Ä–µ—à—ë—Ç–∫–∞ —Ä–µ—à—ë—Ç–∫–∞ —Ä–µ—à—ë—Ç–∫–∞ –ó–∞–≥–æ–ª–æ–≤–æ–∫"
- `- –ü—É–Ω–∫—Ç` ‚Üí "—Ç–∏—Ä–µ –ü—É–Ω–∫—Ç"
- `[—Å—Å—ã–ª–∫–∞](url)` ‚Üí "–∫–≤–∞–¥—Ä–∞—Ç–Ω–∞—è —Å–∫–æ–±–∫–∞ —Å—Å—ã–ª–∫–∞ –∫—Ä—É–≥–ª–∞—è —Å–∫–æ–±–∫–∞ url"
- `**–∂–∏—Ä–Ω—ã–π**` ‚Üí "–∑–≤—ë–∑–¥–æ—á–∫–∞ –∑–≤—ë–∑–¥–æ—á–∫–∞ –∂–∏—Ä–Ω—ã–π –∑–≤—ë–∑–¥–æ—á–∫–∞ –∑–≤—ë–∑–¥–æ—á–∫–∞"

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–°–æ–∑–¥–∞–Ω–∞ —É—Ç–∏–ª–∏—Ç–∞ **`text-sanitizer.ts`** –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ TTS.

### –§—É–Ω–∫—Ü–∏–∏

#### 1. `sanitizeTextForTTS(text: string): string`

–û—á–∏—â–∞–µ—Ç —Ç–µ–∫—Å—Ç –æ—Ç Markdown —Ä–∞–∑–º–µ—Ç–∫–∏:

**–£–¥–∞–ª—è–µ—Ç:**
- –ó–∞–≥–æ–ª–æ–≤–∫–∏: `### –ó–∞–≥–æ–ª–æ–≤–æ–∫` ‚Üí `–ó–∞–≥–æ–ª–æ–≤–æ–∫`
- –ñ–∏—Ä–Ω—ã–π/–∫—É—Ä—Å–∏–≤: `**—Ç–µ–∫—Å—Ç**`, `*—Ç–µ–∫—Å—Ç*` ‚Üí `—Ç–µ–∫—Å—Ç`
- –ó–∞—á—ë—Ä–∫–Ω—É—Ç—ã–π: `~~—Ç–µ–∫—Å—Ç~~` ‚Üí `—Ç–µ–∫—Å—Ç`
- –°—Å—ã–ª–∫–∏: `[—Ç–µ–∫—Å—Ç](url)` ‚Üí `—Ç–µ–∫—Å—Ç`
- –ú–∞—Ä–∫–µ—Ä—ã —Å–ø–∏—Å–∫–æ–≤: `- –ø—É–Ω–∫—Ç`, `* –ø—É–Ω–∫—Ç` ‚Üí `–ø—É–Ω–∫—Ç`
- –ù—É–º–µ—Ä–∞—Ü–∏—é: `1. –ø—É–Ω–∫—Ç` ‚Üí `–ø—É–Ω–∫—Ç`
- –¶–∏—Ç–∞—Ç—ã: `> —Ç–µ–∫—Å—Ç` ‚Üí `—Ç–µ–∫—Å—Ç`
- –ö–æ–¥: `` `–∫–æ–¥` `` ‚Üí `–∫–æ–¥`
- –ë–ª–æ–∫–∏ –∫–æ–¥–∞: ` ```–∫–æ–¥``` ` ‚Üí `–∫–æ–¥`
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã –∏ –ø–µ—Ä–µ–Ω–æ—Å—ã

**–°–æ—Ö—Ä–∞–Ω—è–µ—Ç:**
- –¢–æ—á–∫–∏, –∑–∞–ø—è—Ç—ã–µ
- –í–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∏ –≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞–∫–∏
- –î–≤–æ–µ—Ç–æ—á–∏—è (–¥–ª—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∑–≤—É—á–∞–Ω–∏—è)
- –¢–∏—Ä–µ (–∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ –ø–∞—É–∑—ã)

#### 2. `truncateTextForTTS(text: string, maxLength: number): string`

–û–±—Ä–µ–∑–∞–µ—Ç –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5000 —Å–∏–º–≤–æ–ª–æ–≤):
- –ò—â–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é —Ç–æ—á–∫—É –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –æ–±—Ä–µ–∑–∞–Ω–∏—è
- –î–æ–±–∞–≤–ª—è–µ—Ç –º–Ω–æ–≥–æ—Ç–æ—á–∏–µ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

#### 3. `prepareTextForTTS(text: string, maxLength?: number): string`

–ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞: –æ—á–∏—â–∞–µ—Ç + –æ–±—Ä–µ–∑–∞–µ—Ç.

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `src/lib/text-sanitizer.ts`

```typescript
export function sanitizeTextForTTS(text: string): string {
  // 20 —à–∞–≥–æ–≤ –æ—á–∏—Å—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞
  // 1. –£–¥–∞–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏
  // 2. –£–¥–∞–ª—è–µ–º –∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç
  // 3. –£–¥–∞–ª—è–µ–º –∫—É—Ä—Å–∏–≤
  // ... –∏ —Ç.–¥.
}

export function truncateTextForTTS(text: string, maxLength: number = 5000): string {
  // –û–±—Ä–µ–∑–∞–µ—Ç —Ç–µ–∫—Å—Ç –ø–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ç–æ—á–∫–µ
}

export function prepareTextForTTS(text: string, maxLength?: number): string {
  // –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞: sanitize + truncate
}
```

### 2. –û–±–Ω–æ–≤–ª—ë–Ω `src/hooks/useTTS.ts`

–î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞:

```typescript
import { prepareTextForTTS } from '@/lib/text-sanitizer'

const generateAndPlay = useCallback(async (text: string, lang?: TTSLanguage) => {
  // –û—á–∏—â–∞–µ–º —Ç–µ–∫—Å—Ç –æ—Ç Markdown —Ä–∞–∑–º–µ—Ç–∫–∏
  const cleanedText = prepareTextForTTS(text, 5000) // –ú–∞–∫—Å–∏–º—É–º 5000 —Å–∏–º–≤–æ–ª–æ–≤
  
  console.log('[useTTS] üßπ Original text length:', text.length)
  console.log('[useTTS] ‚ú® Cleaned text length:', cleanedText.length)
  console.log('[useTTS] üìù Cleaned preview:', cleanedText.substring(0, 150))
  
  // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∞—É–¥–∏–æ —Å –æ—á–∏—â–µ–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º
  const audioUrl = await ttsClient.generateSpeechURL(cleanedText, effectiveLanguage)
  // ...
}, [])
```

## üß™ –ü—Ä–∏–º–µ—Ä—ã –æ—á–∏—Å—Ç–∫–∏

### –ü—Ä–∏–º–µ—Ä 1: Markdown –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç

**–í—Ö–æ–¥:**
```markdown
### –ö—Ä–∞—Ç–∫–æ–µ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü–£–ù–ö–¢ –ü–û–í–ï–°–¢–ö–ò –î–ù–Ø:** –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–∞—Ä—Ç—É –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–ö–ü–î) –ê–û ¬´–°–∞–º—Ä—É–∫-“ö–∞–∑—ã–Ω–∞¬ª –Ω–∞ 2025 –≥–æ–¥.

**–†–ï–®–ï–ù–ò–ï:** –ó–ê
```

**–í—ã—Ö–æ–¥:**
```
–ö—Ä–∞—Ç–∫–æ–µ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ. –ü–£–ù–ö–¢ –ü–û–í–ï–°–¢–ö–ò –î–ù–Ø: –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–∞—Ä—Ç—É –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–ö–ü–î) –ê–û ¬´–°–∞–º—Ä—É–∫-“ö–∞–∑—ã–Ω–∞¬ª –Ω–∞ 2025 –≥–æ–¥. –†–ï–®–ï–ù–ò–ï: –ó–ê
```

### –ü—Ä–∏–º–µ—Ä 2: –°–ø–∏—Å–∫–∏

**–í—Ö–æ–¥:**
```markdown
**–†–∏—Å–∫–∏:**

- –†–∏—Å–∫ 1
- –†–∏—Å–∫ 2
- –†–∏—Å–∫ 3
```

**–í—ã—Ö–æ–¥:**
```
–†–∏—Å–∫–∏: –†–∏—Å–∫ 1. –†–∏—Å–∫ 2. –†–∏—Å–∫ 3
```

### –ü—Ä–∏–º–µ—Ä 3: –°—Å—ã–ª–∫–∏ –∏ –∫–æ–¥

**–í—Ö–æ–¥:**
```markdown
–î–æ–∫—É–º–µ–Ω—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ [—Å—Å—ã–ª–∫–µ](https://example.com).

–ö–æ–¥: `const x = 5`

```typescript
function test() {
  return true
}
```
```

**–í—ã—Ö–æ–¥:**
```
–î–æ–∫—É–º–µ–Ω—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Å—Å—ã–ª–∫–µ. –ö–æ–¥: const x = 5. function test() { return true }
```

### –ü—Ä–∏–º–µ—Ä 4: –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —Ç–µ–∫—Å—Ç

**–í—Ö–æ–¥:**
```markdown
**AGENDA ITEM:** Adjustments to the 2025 Motivation Key Performance Indicators (KPIs) of JSC "Samruk-Kazyna"

**DECISION OF INDEPENDENT BOARD MEMBER:** FOR

**BRIEF CONCLUSION:** The adjustments to the 2025 motivation KPIs of JSC "Samruk-Kazyna" are necessary and timely.
```

**–í—ã—Ö–æ–¥:**
```
AGENDA ITEM: Adjustments to the 2025 Motivation Key Performance Indicators (KPIs) of JSC "Samruk-Kazyna". DECISION OF INDEPENDENT BOARD MEMBER: FOR. BRIEF CONCLUSION: The adjustments to the 2025 motivation KPIs of JSC "Samruk-Kazyna" are necessary and timely.
```

## üìä –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

### –î–æ –æ—á–∏—Å—Ç–∫–∏

```bash
[useTTS] üé§ Generating audio for text: **–ü–£–ù–ö–¢ –ü–û–í–ï–°–¢–ö–ò –î–ù–Ø:** –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π...
```

### –ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏

```bash
[useTTS] üßπ Original text length: 2547
[useTTS] ‚ú® Cleaned text length: 2103
[useTTS] üìù Cleaned preview: –ü–£–ù–ö–¢ –ü–û–í–ï–°–¢–ö–ò –î–ù–Ø: –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–∞—Ä—Ç—É –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏...
[useTTS] üé§ Generating audio for text: –ü–£–ù–ö–¢ –ü–û–í–ï–°–¢–ö–ò –î–ù–Ø: –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π...
[useTTS] üåê Using language: ru
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –†—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç —Å Markdown

1. –í—ã–±–µ—Ä–∏—Ç–µ **üá∑üá∫ –†—É—Å—Å–∫–∏–π**
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç –∏ —Å–¥–µ–ª–∞–π—Ç–µ –∞–Ω–∞–ª–∏–∑
3. –ù–∞–∂–º–∏—Ç–µ **"üîä –û–∑–≤—É—á–∏—Ç—å"**
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–∑–≤—É—á–∫—É**: –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "–∑–≤—ë–∑–¥–æ—á–∫–∞", "—Ä–µ—à—ë—Ç–∫–∞", "—Ç–∏—Ä–µ"

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:
```bash
[useTTS] üßπ Original text length: 2547
[useTTS] ‚ú® Cleaned text length: 2103  ‚Üê –¢–µ–∫—Å—Ç —Å—Ç–∞–ª –∫–æ—Ä–æ—á–µ
[useTTS] üìù Cleaned preview: –ü–£–ù–ö–¢ –ü–û–í–ï–°–¢–ö–ò –î–ù–Ø: –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ...  ‚Üê –ë–µ–∑ –∑–≤—ë–∑–¥–æ—á–µ–∫!
```

### –¢–µ—Å—Ç 2: –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —Ç–µ–∫—Å—Ç —Å Markdown

1. –í—ã–±–µ—Ä–∏—Ç–µ **üá¨üáß English**
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç –∏ —Å–¥–µ–ª–∞–π—Ç–µ –∞–Ω–∞–ª–∏–∑
3. –ù–∞–∂–º–∏—Ç–µ **"üîä Voice Over"**
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–∑–≤—É—á–∫—É**: –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —á–∏—Å—Ç–∞—è —Ä–µ—á—å –±–µ–∑ —Ä–∞–∑–º–µ—Ç–∫–∏

### –¢–µ—Å—Ç 3: –î–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç

1. –°–¥–µ–ª–∞–π—Ç–µ –∞–Ω–∞–ª–∏–∑ (–æ–±—ã—á–Ω–æ 2000-5000 —Å–∏–º–≤–æ–ª–æ–≤)
2. –ù–∞–∂–º–∏—Ç–µ –æ–∑–≤—É—á–∫—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```bash
[useTTS] üßπ Original text length: 12547  ‚Üê –û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π
[useTTS] ‚ú® Cleaned text length: 5000    ‚Üê –û–±—Ä–µ–∑–∞–Ω –¥–æ 5000
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É

–í `src/hooks/useTTS.ts`:

```typescript
// –ë—ã–ª–æ: 5000 —Å–∏–º–≤–æ–ª–æ–≤
const cleanedText = prepareTextForTTS(text, 5000)

// –ú–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 10000
const cleanedText = prepareTextForTTS(text, 10000)

// –ò–ª–∏ —É–±—Ä–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è!)
const cleanedText = prepareTextForTTS(text)
```

### –î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –æ—á–∏—Å—Ç–∫—É

–í `src/lib/text-sanitizer.ts` –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞:

```typescript
// –ù–∞–ø—Ä–∏–º–µ—Ä, —É–¥–∞–ª–∏—Ç—å —Å–∫–æ–±–∫–∏
cleaned = cleaned.replace(/[()]/g, '')

// –ò–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Å–ª–æ–≤–∞
cleaned = cleaned.replace(/–ö–ü–î/g, '–∫–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏')
```

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –î–æ/–ü–æ—Å–ª–µ

| –ê—Å–ø–µ–∫—Ç | –î–æ | –ü–æ—Å–ª–µ |
|--------|-----|--------|
| **Markdown —Ä–∞–∑–º–µ—Ç–∫–∞** | –û–∑–≤—É—á–∏–≤–∞–µ—Ç—Å—è | ‚úÖ –£–¥–∞–ª—è–µ—Ç—Å—è |
| **–ó–∞–≥–æ–ª–æ–≤–∫–∏ (###)** | "—Ä–µ—à—ë—Ç–∫–∞ —Ä–µ—à—ë—Ç–∫–∞" | ‚úÖ –ß–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç |
| **–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç (\*\*)** | "–∑–≤—ë–∑–¥–æ—á–∫–∞ –∑–≤—ë–∑–¥–æ—á–∫–∞" | ‚úÖ –ß–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç |
| **–°–ø–∏—Å–∫–∏ (-)** | "—Ç–∏—Ä–µ" –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º | ‚úÖ –ü–ª–∞–≤–Ω—ã–π —Ç–µ–∫—Å—Ç |
| **–°—Å—ã–ª–∫–∏ []()** | –û–∑–≤—É—á–∏–≤–∞—é—Ç—Å—è —Å–∫–æ–±–∫–∏ | ‚úÖ –¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç |
| **–î–ª–∏–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã** | –ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π | ‚úÖ –û–±—Ä–µ–∑–∞—é—Ç—Å—è –¥–æ 5000 |
| **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã** | –ï—Å—Ç—å | ‚úÖ –£–¥–∞–ª–µ–Ω—ã |
| **–ü–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫** | "–ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏" | ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ —Ç–æ—á–∫—É |

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **‚úÖ –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–≤—É—á–∞–Ω–∏–µ** - TTS –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç —Ç–æ–ª—å–∫–æ —Å–º—ã—Å–ª–æ–≤–æ–π —Ç–µ–∫—Å—Ç
2. **‚úÖ –ë–µ–∑ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤** - –Ω–µ—Ç "–∑–≤—ë–∑–¥–æ—á–∫–∞", "—Ä–µ—à—ë—Ç–∫–∞", "—Ç–∏—Ä–µ"
3. **‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª–∏–Ω—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—Ä–µ–∑–∞–Ω–∏–µ –¥–æ 5000 —Å–∏–º–≤–æ–ª–æ–≤
4. **‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏** - —Ç–æ—á–∫–∏, –∑–∞–ø—è—Ç—ã–µ, –¥–≤–æ–µ—Ç–æ—á–∏—è –æ—Å—Ç–∞—é—Ç—Å—è
5. **‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤–∏–¥–Ω–æ, –∫–∞–∫ –∏–∑–º–µ–Ω–∏–ª—Å—è —Ç–µ–∫—Å—Ç
6. **‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —á–∏—Å—Ç–∏—Ç—å —Ç–µ–∫—Å—Ç

## üöÄ –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –£–º–Ω–∞—è –∑–∞–º–µ–Ω–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π

```typescript
// –í text-sanitizer.ts
const acronyms: Record<string, string> = {
  '–ö–ü–î': '–∫–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏',
  '–ê–û': '–∞–∫—Ü–∏–æ–Ω–µ—Ä–Ω–æ–µ –æ–±—â–µ—Å—Ç–≤–æ',
  '–í–ù–î': '–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã',
  '–ù–ü–ê': '–Ω–æ—Ä–º–∞—Ç–∏–≤–Ω–æ-–ø—Ä–∞–≤–æ–≤—ã–µ –∞–∫—Ç—ã',
}

for (const [short, full] of Object.entries(acronyms)) {
  cleaned = cleaned.replace(new RegExp(`\\b${short}\\b`, 'g'), full)
}
```

### 2. –£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–∏—Å–µ–ª

```typescript
// 2025 ‚Üí "–¥–≤–µ —Ç—ã—Å—è—á–∏ –¥–≤–∞–¥—Ü–∞—Ç—å –ø—è—Ç—ã–π"
// ‚Ññ5 ‚Üí "–Ω–æ–º–µ—Ä –ø—è—Ç—å"
cleaned = cleaned.replace(/(\d{4})/g, (match) => {
  // –õ–æ–≥–∏–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —á–∏—Å–ª–∞ –≤ —Å–ª–æ–≤–∞
  return convertNumberToWords(match)
})
```

### 3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—á–∏—â–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞

```typescript
// –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—á–∏—â–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç, —á—Ç–æ–±—ã –Ω–µ —á–∏—Å—Ç–∏—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑
const cleanedTextCache = useRef<Map<string, string>>(new Map())

const getCleaned = (text: string) => {
  const hash = simpleHash(text)
  if (cleanedTextCache.current.has(hash)) {
    return cleanedTextCache.current.get(hash)!
  }
  const cleaned = prepareTextForTTS(text)
  cleanedTextCache.current.set(hash, cleaned)
  return cleaned
}
```

## ‚úÖ Checklist

- [x] –°–æ–∑–¥–∞–Ω–∞ —É—Ç–∏–ª–∏—Ç–∞ text-sanitizer.ts
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è sanitizeTextForTTS
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è truncateTextForTTS
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è prepareTextForTTS
- [x] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ useTTS hook
- [x] –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—á–∏—Å—Ç–∫–∏
- [x] –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ –≤—Å–µ—Ö —è–∑—ã–∫–∞—Ö (ru/kk/en)

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

TTS —Ç–µ–ø–µ—Ä—å –æ–∑–≤—É—á–∏–≤–∞–µ—Ç **—á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç** –±–µ–∑ Markdown —Ä–∞–∑–º–µ—Ç–∫–∏ –∏ –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤! üéôÔ∏è

---

**–î–∞—Ç–∞:** 6 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
