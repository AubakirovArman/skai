# ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: –í–Ω–µ—à–Ω–∏–π Embedding API

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

**–ë–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π Python —Å–µ—Ä–≤–∏—Å!** üéâ

### –ë—ã–ª–æ (—Ç—Ä–µ–±–æ–≤–∞–ª–æ 2 —Ç–µ—Ä–º–∏–Ω–∞–ª–∞):
```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1
python3 src/lib/embedding-service.py

# –¢–µ—Ä–º–∏–Ω–∞–ª 2
npm run dev
```

### –°—Ç–∞–ª–æ (—Ç–æ–ª—å–∫–æ 1 –∫–æ–º–∞–Ω–¥–∞):
```bash
npm run dev  # –ì–æ—Ç–æ–≤–æ! ‚ú®
```

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### API Endpoint
- **–°—Ç–∞—Ä—ã–π:** `http://localhost:8001/embed`
- **–ù–æ–≤—ã–π:** `https://bge-m3.sk-ai.kz/encode`

### –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞
```bash
curl -X POST "https://bge-m3.sk-ai.kz/encode" \
     -H "Content-Type: application/json" \
     -d '{"texts": ["Your text here"], "return_dense": true}'
```

### –û—Ç–≤–µ—Ç
```json
{
  "dense_vecs": [
    [-0.043, 0.012, 0.002, ..., 0.010]  // 1024 —á–∏—Å–ª–∞
  ]
}
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç API:
```bash
node test-embedding-api.js
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üéâ All tests passed!

Summary:
- API endpoint: ‚úÖ Working
- Response format: ‚úÖ Correct (dense_vecs)
- Embedding dimension: ‚úÖ 1024
- Batch processing: ‚úÖ Supported
- Multilingual: ‚úÖ Supported (en/ru/kk)
- Performance: ‚úÖ Fast (avg 19.70ms per text)
```

---

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º?

### 1. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ (Git pull)
```bash
git pull origin main
```

### 2. –û–±–Ω–æ–≤–∏—Ç–µ `.env.local`
```bash
# –ò–∑–º–µ–Ω–∏—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É:
EMBEDDING_SERVICE_URL="https://bge-m3.sk-ai.kz"
```

### 3. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python —Å–µ—Ä–≤–∏—Å (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω)
```bash
# –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å
ps aux | grep embedding-service.py

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ (–∑–∞–º–µ–Ω–∏—Ç–µ <PID> –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ID –ø—Ä–æ—Ü–µ—Å—Å–∞)
kill <PID>
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```bash
npm run dev
```

**–ì–æ—Ç–æ–≤–æ!** –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! üöÄ

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ü—Ä–æ—â–µ –∑–∞–ø—É—Å–∫** - –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö  
‚úÖ **–ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** - –Ω–µ –Ω—É–∂–Ω—ã PyTorch, sentence-transformers  
‚úÖ **–ë—ã—Å—Ç—Ä–µ–µ** - –Ω–µ –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –º–æ–¥–µ–ª—å (3.5 GB) –ª–æ–∫–∞–ª—å–Ω–æ  
‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–æ** - –µ–¥–∏–Ω–∞—è –≤–µ—Ä—Å–∏—è –º–æ–¥–µ–ª–∏ –¥–ª—è –≤—Å–µ—Ö  
‚úÖ **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ en/ru/kk  

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏:
- **[EXTERNAL_EMBEDDING_API_MIGRATION.md](./EXTERNAL_EMBEDDING_API_MIGRATION.md)** - –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

**–î–∞—Ç–∞:** 7 –æ–∫—Ç—è–±—Ä—è 2025 –≥.
