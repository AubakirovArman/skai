# üéâ TTS –ü—Ä–æ–±–ª–µ–º–∞ CORS —Ä–µ—à–µ–Ω–∞!

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

–°–æ–∑–¥–∞–Ω Next.js API proxy endpoint –¥–ª—è TTS, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É CORS.

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ/–∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. ‚úÖ **`src/app/api/tts/route.ts`** - –ù–æ–≤—ã–π proxy endpoint
2. ‚úÖ **`src/lib/tts-client.ts`** - –û–±–Ω–æ–≤–ª—ë–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è proxy
3. ‚úÖ **`.env.example`** - –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
4. ‚úÖ **`TTS_CORS_FIX.md`** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. Next.js —É–∂–µ –∑–∞–ø—É—â–µ–Ω (–Ω–∞ –ø–æ—Ä—Ç—É 3001)

–ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
http://localhost:3001/virtual-director
```

### 2. –¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

1. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç** (PDF/DOCX/TXT)
2. **–ù–∞–∂–º–∏—Ç–µ "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å"** –∏ –¥–æ–∂–¥–∏—Ç–µ—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
3. **–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üîä –û–∑–≤—É—á–∏—Ç—å"** –≤ –æ–¥–Ω–æ–π –∏–∑ –≤–∫–ª–∞–¥–æ–∫ (–ò—Ç–æ–≥/–í–ù–î/–ù–ü–ê)
4. **–ê—É–¥–∏–æ –¥–æ–ª–∂–Ω–æ –Ω–∞—á–∞—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ!** üéµ

### 3. –¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–π

- ‚úÖ **–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ** - –Ω–∞–∂–º–∏—Ç–µ "üîä –û–∑–≤—É—á–∏—Ç—å"
- ‚úÖ **–ü–∞—É–∑–∞** - –Ω–∞–∂–º–∏—Ç–µ –µ—â—ë —Ä–∞–∑ (–∫–Ω–æ–ø–∫–∞ —Å—Ç–∞–Ω–µ—Ç "‚è∏Ô∏è")
- ‚úÖ **–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å** - –Ω–∞–∂–º–∏—Ç–µ —Å–Ω–æ–≤–∞ (–ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Å —Ç–æ–≥–æ –∂–µ –º–µ—Å—Ç–∞)
- ‚úÖ **–°–º–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∏** - –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –¥—Ä—É–≥—É—é –≤–∫–ª–∞–¥–∫—É (–æ–∑–≤—É—á–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è)
- ‚úÖ **–ù–æ–≤–∞—è –æ–∑–≤—É—á–∫–∞** - –Ω–∞–∂–º–∏—Ç–µ "üîä –û–∑–≤—É—á–∏—Ç—å" –Ω–∞ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ

## üéØ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –î–æ (‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–ª–æ)
```
–ë—Ä–∞—É–∑–µ—Ä ‚Üí https://tts.sk-ai.kz/api/tts
          ‚ùå CORS Error: Failed to fetch
```

### –ü–æ—Å–ª–µ (‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç)
```
–ë—Ä–∞—É–∑–µ—Ä ‚Üí /api/tts (Next.js proxy) ‚Üí https://tts.sk-ai.kz/api/tts
          ‚úÖ Same-origin, –Ω–µ—Ç CORS
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12):

```
[TTS] üé§ Generating speech...
[TTS] üìù Text length: 1234
[TTS] üåê Language: ru
[TTS] ‚úÖ Speech generated, size: 12345 bytes
```

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ Next.js:

```
[TTS Proxy] üé§ Generating speech...
[TTS Proxy] üìù Text length: 1234
[TTS Proxy] üåê Language: ru
[TTS Proxy] ‚úÖ Speech generated, size: 12345 bytes
```

## ‚ùì –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Next.js –∑–∞–ø—É—â–µ–Ω

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
‚ñ≤ Next.js 15.0.3
- Local: http://localhost:3001
‚úì Ready
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

–ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ JavaScript –∏–ª–∏ —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏.

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª Next.js

–ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ –æ—Ç `[TTS Proxy]`.

### 4. –¢–µ—Å—Ç proxy –Ω–∞–ø—Ä—è–º—É—é

```bash
curl -X POST "http://localhost:3001/api/tts" \
  -H "Content-Type: application/json" \
  -d '{"text": "–¢–µ—Å—Ç", "lang": "ru"}' \
  --output test.mp3

# –î–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å MP3 —Ñ–∞–π–ª ~8-15 KB
ls -lh test.mp3
```

## üéâ –ì–æ—Ç–æ–≤–æ!

TTS —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–∑–≤—É—á–∏—Ç—å –ª—é–±–æ–π –∞–Ω–∞–ª–∏–∑.

---

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–∞—Ö
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∑–∞—Ö—Å–∫–∏–π —è–∑—ã–∫
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–º–µ–Ω—É –≤–∫–ª–∞–¥–æ–∫ –≤–æ –≤—Ä–µ–º—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- `TTS_CORS_FIX.md` - –ü–æ–ª–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ
- `TTS_INTEGRATION_COMPLETE.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ–π TTS —Å–∏—Å—Ç–µ–º—ã
- `TTS_API_TESTING.md` - –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
